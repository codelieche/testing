{% extends 'base.html' %}
{% block title %}编辑测试用例-{{ case.name }} | 性能测试{% endblock %}
{% load staticfiles %}

{% block content %}
    <div class="wrap case">
        <div class="header clearfix">
            <div class="title fl">
                <h2>{{ case.name }}</h2>
            </div>
        </div>
        <!--添加case内容开始-->
        <div class="section case-add">
            <div class="title">
                <span class="pts-icon circle"></span>
                编辑测试用例
            </div>
            <form method="post" id="case_add_form">
                <!--项目列表选项-->
                <p>
                    <label class="required" for="id_project">项&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;目:</label>
                    <select id="id_project" name="project" required="">
                        <option value="{{ case.project_id }}" selected>{{ case.project.name }}</option>
                    </select>
                </p>

                <!--测试用例名称-->
                <p>
                    <label for="id_name">用例名称:</label>
                    <input id="id_name" maxlength="100" name="name" type="text" value="{{ case.name }}" required="">
                    {% csrf_token %}
                </p>

                <!--测试用例描述-->
                <p>
                    <label for="id_desc" class="label-block">描&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;述:</label>
                    <!--<input id="id_desc" maxlength="512" name="desc" type="text" value="">-->
                    <textarea cols="60" id="id_desc" maxlength="512" name="desc" rows="3"
                        ondblclick="this.focus();this.select();"
                        placeholder="测试用例描述信息">{{ case.desc }}</textarea>
                </p>

                <!--选择编写方式-->
                <p>
                    <label class="required" for="id_way">编码方式:</label>
                    <select id="id_way" name="way" required="">
                        <option value="shiwu" selected="selected">事务</option>
                        <option value="code">代码</option>
                    </select>
                    <span class="hint">
                        只能使用一种方式
                    </span>
                </p>
                <div class="code-way">
                    <label class="label-block" >事务列表:</label>
                    <ol class="shiwu-list">
                        <li class="clearfix">
                            <a class="shiwu">事务1</a>
                            <div class="buttons fr">
                                <div class="btn btn-default">删除</div>
                                <div class="btn btn-primary">编辑</div>
                            </div>
                        </li>
                    </ol>
                    <div class="add-shiwu">
                        <span>还没有任何事务</span>
                        <span><a class="plus" onclick="showShiwuMask();">+</a>一个</span>
                    </div>
                </div>

                <!--测试代码-->
                <div class="code-way">
                    <label for="id_code" class="label-block">测试代码:</label>
                    <textarea cols="60" id="id_code" name="code" rows="16"
                              placeholder="请输入测试的代码">{{ case.code }}</textarea>
                </div>

                <!--用例状态：edit可见-->
                <p>
                    <label class="required" for="id_status">状&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;态:</label>
                    <select id="id_status" name="status" required="">
                        {% for status in status_choices %}
                            <option value="{{ status.0 }}" {% ifequal status.0 case.status %}selected="selected" {% endifequal %}>{{ status.1 }}</option>
                        {% endfor %}

                    </select>
                </p>

                <!--用例最近执行：edit可见-->
                <p>
                    <label for="id_execute_id">最近执行:</label>
                    <input id="id_execute_id" name="execute_id" type="text" value="20" disabled="true" value="{{ case.execute_id }}">
                </p>

                <!--用例Cookie-->
                <p>
                    <label for="id_cookies" class="label-block">Cookies:</label>
                    <!--<input id="id_cookies" maxlength="512" name="cookies" type="text" value="">-->
                    <textarea cols="60" id="id_cookies" name="cookies" rows="1"
                        ondblclick="this.focus();this.select()"
                        placeholder="请输入cookies:PHPSESSID=xxxx;route=xxxxx">{{ case.cookies }}</textarea>
                </p>

                <!--提交按钮组-->
                <div class="buttons">
                    <input type="reset" class="btn btn-default" value="重置">
                    <input type="submit" class="btn btn-primary" value="提交">
                </div>
            </form>
        </div>
        <!--添加case内容end-->
    </div>
{% endblock %}

{% block custom_mask %}
    <div class="mask container mask-shiwu">
        <div class="mask-wrap case">
            <div class="section clearfix">
                <div class="title fl">
                    <span class="pts-icon circle"></span>
                    添加事务
                </div>
                <div class="btn btn-default fr" id="mask-close">关闭</div>
                <div class="clear"></div>
                <form action="">
                <!--事务名称-->
                <p>
                    <label for="id_name2">事务名称:</label>
                    <input id="id_name2" maxlength="100" name="name" type="text" value="" required=""
                           placeholder="首页">
                    <label for="id_startup" style="width: 50px; margin-left: 30px;">Startup: </label>
                    <input type="checkbox" value="startup" id="id_startup" style="width:30px;"
                           checked>
                </p>

                <!--请求方法和网址-->
                <p>
                    <!--<label class="required" for="id_method">状态:</label>-->
                    <select id="id_method" name="method" required="">
                        <option value="GET" selected="selected">GET</option>
                        <option value="POST">POST</option>
                        <option value="PUT">PUT</option>
                        <option value="DELETE">DELETE</option>
                    </select>
                    <input id="id_url" maxlength="120" name="url" type="text" value="" required=""
                           placeholder="请输入网址" style="margin-left: 0px;width:80%;line-height:20px;">
                </p>

                <!--请求Body-->
                <div class="body-content clearfix">
                    <div class="body-title fl">请求Body:</div>
                    <div class="body-data fl" style="margin-left: 10px">
                        <div class="box" style="">
                            <input type="text" class="field" name="key" placeholder="key">
                            <input type="text" class="field" name="value" placeholder="value">
                            <a class="fieldDel btn btn-default" onclick="fieldDelClick(this);">Del</a>
                            <a class="fieldAdd btn btn-primary" onclick="fieldAddClick(this);">+</a>
                        </div>
                    </div>
                </div>

                <!--提交按钮组-->
                <div class="buttons">
                    <input type="reset" class="btn btn-default" value="重置">
                    <input type="submit" class="btn btn-primary" value="添加">
                </div>
            </form>
            </div>
        </div>

    </div>
{% endblock %}

{% block custom_js %}
    <script src="{% static 'js/zepto.min.js' %}"></script>
    <script src="{% static 'js/caseadd.js' %}"></script>
{% endblock %}